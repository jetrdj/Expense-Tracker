<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Professional Expense Tracker</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Segoe UI", sans-serif; }

    body { background: linear-gradient(135deg, #e6e9f0, #eef1f5); padding: 40px; transition: 0.4s; }

    .dark { background: linear-gradient(135deg, #0f0f0f, #232323); color: white; }

    .container { max-width: 650px; margin: auto; background: rgba(255, 255, 255, 0.3); padding: 28px; border-radius: 18px; backdrop-filter: blur(10px); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2); animation: fadeIn 0.7s ease; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    h2 { text-align: center; margin-bottom: 18px; font-size: 26px; letter-spacing: 1px; }

    input, select, button { width: 100%; padding: 12px; margin: 7px 0; border-radius: 10px; border: 1px solid #ccc; font-size: 15px; transition: 0.3s; }

    input:focus, select:focus { border-color: #007bff; box-shadow: 0 0 10px rgba(0, 123, 255, 0.4); }

    button { background: #2575fc; color: white; border: none; cursor: pointer; }

    button:hover { transform: scale(1.03); opacity: 0.9; }

    .stats { display: flex; justify-content: space-between; margin: 15px 0; font-size: 17px; }

    .list { margin-top: 18px; }

    .item { background: rgba(255, 255, 255, 0.6); padding: 14px; border-radius: 12px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; animation: fadeItem 0.6s ease forwards; transform-origin: left; }

    @keyframes fadeItem { from { transform: scale(0.85); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    .del { background: red; border: none; color: white; padding: 5px 12px; border-radius: 6px; }

    .toast { position: fixed; top: 20px; right: 20px; background: #333; color: white; padding: 12px 18px; border-radius: 8px; display: none; z-index: 100; animation: slideIn 0.5s ease; }

    @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

    .footer { text-align: center; margin-top: 25px; opacity: 0.7; font-size: 14px; }
  </style>
</head>

<body id="body">

  <div class="container">
    <h2>ðŸ’¼ Professional Expense Tracker</h2>

    <div class="top-buttons">
      <button id="toggleDark">Toggle Dark Mode</button>
      <button id="resetAll">Reset All</button>
      <button id="toggleChart">Switch Chart</button>
    </div>

    <input type="number" id="income" placeholder="Enter Income" />
    <button id="setIncome">Save Income</button>

    <input type="text" id="title" placeholder="Expense Title" />
    <input type="number" id="amount" placeholder="Amount" />

    <select id="category">
      <option>Food</option>
      <option>Travel</option>
      <option>Bills</option>
      <option>Shopping</option>
      <option>Others</option>
    </select>

    <button id="addExpense">Add Expense</button>

    <select id="monthFilter">
      <option value="">All Months</option>
      <option value="0">January</option>
      <option value="1">February</option>
      <option value="2">March</option>
      <option value="3">April</option>
      <option value="4">May</option>
      <option value="5">June</option>
      <option value="6">July</option>
      <option value="7">August</option>
      <option value="8">September</option>
      <option value="9">October</option>
      <option value="10">November</option>
      <option value="11">December</option>
    </select>

    <div class="stats">
      <p><b>Total:</b> â‚¹<span id="total">0</span></p>
      <p><b>Balance:</b> â‚¹<span id="balance">0</span></p>
    </div>

    <canvas id="chart" style="margin-top:20px;"></canvas>
    <button id="downloadPDF">Download Report (PDF)</button>

    <div class="list" id="list"></div>

    <div class="footer">ðŸ”§ Built by <b>Jethro Ephraim</b> â€” Precision Â· Performance Â· Professionalism.</div>
  </div>

  <div class="toast" id="toast"></div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
      let income = Number(localStorage.getItem('income')) || 0;
      let chartType = 'bar';
      let chart;

      const showToast = (msg) => {
        const toast = document.getElementById('toast');
        toast.textContent = msg;
        toast.style.display = 'block';
        setTimeout(() => (toast.style.display = 'none'), 2000);
      };

      const toggleDark = () => {
        document.getElementById('body').classList.toggle('dark');
        showToast("Theme Changed!");
      };

      const save = () => {
        localStorage.setItem('expenses', JSON.stringify(expenses));
      };

      const setIncome = () => {
        income = Number(document.getElementById('income').value);
        localStorage.setItem('income', income);
        render();
        updateChart();
        showToast("Income Saved!");
      };

      const resetAll = () => {
        if (confirm("Are you sure? All data will be lost.")) {
          expenses = [];
          income = 0;
          localStorage.clear();
          render();
          updateChart();
          showToast("Reset Complete!");
        }
      };

      const addExpense = () => {
        const title = document.getElementById('title').value;
        const amount = +document.getElementById('amount').value;
        const category = document.getElementById('category').value;
        const date = new Date();

        if (!title || !amount) return alert("Fill all fields");

        expenses.push({
          id: Date.now(),
          title,
          amount,
          category,
          month: date.getMonth()
        });
        save();
        render();
        updateChart();
        document.getElementById('title').value = '';
        document.getElementById('amount').value = '';
        showToast("Expense Added!");
      };

      const delExpense = (id) => {
        expenses = expenses.filter(e => e.id !== id);
        save();
        render();
        updateChart();
        showToast("Expense Removed!");
      };

      const toggleChart = () => {
        chartType = chartType === 'bar' ? 'pie' : 'bar';
        updateChart();
        showToast(Switched to ${chartType.toUpperCase()} Chart);
      };

      const updateChart = () => {
        const ctx = document.getElementById("chart");
        const categories = {};
        const filterMonth = document.getElementById('monthFilter').value;

        expenses
          .filter(e => filterMonth === '' || e.month == filterMonth)
          .forEach(e => {
            categories[e.category] = (categories[e.category] || 0) + e.amount;
          });

        if (chart) chart.destroy();

        chart = new Chart(ctx, {
          type: chartType,
          data: {
            labels: Object.keys(categories),
            datasets: [{
              data: Object.values(categories),
              backgroundColor: ['#FF8C00', '#1E90FF', '#32CD32', '#FF69B4', '#FFD700'],
            }]
          }
        });
      };

      const downloadPDF = () => {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFontSize(16);
        doc.text("Expense Summary Report", 10, 10);
        doc.setFontSize(12);
        let y = 20;

        expenses.forEach((e, index) => {
          doc.text(${index + 1}. ${e.title} - â‚¹${e.amount} (${e.category}), 10, y);
          y += 10;
        });

        doc.text(Total Expenses: â‚¹${document.getElementById('total').textContent}, 10, y + 10);
        doc.text(Balance: â‚¹${document.getElementById('balance').textContent}, 10, y + 20);

        doc.save("Expense_Report.pdf");
        showToast("PDF Downloaded!");
      };

      const render = () => {
        const list = document.getElementById('list');
        const totalEl = document.getElementById('total');
        const balanceEl = document.getElementById('balance');
        const filterMonth = document.getElementById('monthFilter').value;
        
        list.innerHTML = '';
        let sum = 0;

        expenses
          .filter(e => filterMonth === '' || e.month == filterMonth)
          .forEach(e => {
            sum += e.amount;
            const div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = `
              <div><b
